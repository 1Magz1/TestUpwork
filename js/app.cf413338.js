(function(){"use strict";var t={4426:function(t,e,s){var o=s(9963),n=s(6252);function a(t,e,s,o,a,r){const i=(0,n.up)("HeaderComponent"),u=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(i),(0,n.Wm)(u)],64)}const r=t=>((0,n.dD)("data-v-243115d4"),t=t(),(0,n.Cn)(),t),i={class:"header"},u=r((()=>(0,n._)("h3",null,"Test project for UPWORK",-1))),c=[u];function p(t,e,s,o,a,r){return(0,n.wg)(),(0,n.iD)("div",i,c)}var l={name:"header-component"},d=s(3744);const _=(0,d.Z)(l,[["render",p],["__scopeId","data-v-243115d4"]]);var h=_,f={components:{HeaderComponent:h}};const m=(0,d.Z)(f,[["render",a]]);var I=m,g=s(2201);const v=t=>((0,n.dD)("data-v-b4c4b57a"),t=t(),(0,n.Cn)(),t),b={class:"home page"},S={class:"wrapper"},w=v((()=>(0,n._)("h2",{class:"title"},"Please login",-1))),E={class:"home__card card"},O=["disabled"],T={key:0,class:"toast"};function L(t,e,s,a,r,i){const u=(0,n.up)("BaseInput"),c=(0,n.up)("BaseToast");return(0,n.wg)(),(0,n.iD)("div",b,[(0,n._)("div",S,[w,(0,n._)("div",E,[(0,n._)("form",{onSubmit:e[0]||(e[0]=(0,o.iM)(((...e)=>t.requestLogin&&t.requestLogin(...e)),["prevent"]))},[(0,n.Wm)(u,{class:"home__card-input",onInputValue:t.updateLoginInput,value:t.email,options:t.textInputOptions},null,8,["onInputValue","value","options"]),(0,n.Wm)(u,{class:"home__card-input",onInputValue:t.updatePasswordInput,value:t.password,options:t.passwordInputOptions},null,8,["onInputValue","value","options"]),(0,n._)("button",{disabled:t.isBtnDisabled,class:"btn",type:"submit"}," Login ",8,O)],32)]),t.isShowToast?((0,n.wg)(),(0,n.iD)("div",T,[(0,n.Wm)(c,{onClose:t.closeToast,text:t.toastText,class:"home__toast"},null,8,["onClose","text"])])):(0,n.kq)("",!0)])])}s(7658);var y=s(3907);let U;const R=t=>{U=t},N=(t,e)=>U.get(t,e||null),G=(t,e,s)=>U.post(t,e,s);var x={$get:N,$post:G};const Z=async t=>{let e=null;if("test@test.com"!==t.login||"12345"!==t.password)throw Error("404");return e=await x.$post("/login",t),e};var D,P,k={requestUserInfo:Z},q={userService:k};(function(t){t["GET_IS_USER_LOGIN"]="GET_IS_USER_LOGIN",t["GET_USER_INFO"]="GET_USER_INFO"})(D||(D={})),function(t){t["SET_IS_USER_LOGIN"]="SET_IS_USER_LOGIN",t["SET_USER_INFO"]="SET_USER_INFO"}(P||(P={}));var C=(0,y.MT)({state:{isUserLogin:!1,userInfo:{}},getters:{[D.GET_IS_USER_LOGIN]:t=>t.isUserLogin,[D.GET_USER_INFO]:t=>t.userInfo},mutations:{[P.SET_IS_USER_LOGIN]:(t,e)=>t.isUserLogin=e,[P.SET_USER_INFO]:(t,e)=>t.userInfo=e},actions:{async requestLogin(t,e){const s=await q.userService.requestUserInfo(e);return!!s&&(t.commit(P.SET_USER_INFO,s.data),t.dispatch("logIn"),!0)},logIn(t){sessionStorage.setItem("isLogin","true"),t.commit(P.SET_IS_USER_LOGIN,!0)},logOut(t){sessionStorage.setItem("isLogin","false"),t.commit(P.SET_IS_USER_LOGIN,!1)}}}),V=s(3577);const j={class:"base-input"},F=["for"],$=["id","type","placeholder"];function W(t,e,s,a,r,i){return(0,n.wg)(),(0,n.iD)("div",j,[(0,n._)("label",{class:"base-input__label",for:t.options.id},(0,V.zw)(t.options.label),9,F),(0,n.wy)((0,n._)("input",{class:"base-input__input","onUpdate:modelValue":e[0]||(e[0]=e=>t.inputValue=e),id:t.options.id,type:t.options.type,placeholder:t.options.placeholder,onInput:e[1]||(e[1]=e=>t.$emit("inputValue",t.inputValue))},null,40,$),[[o.YZ,t.inputValue]])])}var B=(0,n.aZ)({name:"base-input",data(){return{inputValue:""}},props:{options:{type:Object,required:!0},value:{type:String,required:!1}},beforeMount(){this.value&&(this.inputValue=this.value)},watch:{value:{handler(t){this.inputValue=t}}}});const M=(0,d.Z)(B,[["render",W],["__scopeId","data-v-7a54f78a"]]);var z=M;const H={class:"base-toast"},Y={class:"base-toast__text"};function A(t,e,s,o,a,r){return(0,n.wg)(),(0,n.iD)("div",H,[(0,n._)("span",Y,(0,V.zw)(t.text),1),(0,n._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("close")),class:"base-toast__btn"})])}var K=(0,n.aZ)({name:"base-toast",props:{text:{type:String,required:!0}}});const J=(0,d.Z)(K,[["render",A],["__scopeId","data-v-1b55c8aa"]]);var Q=J,X=(0,n.aZ)({name:"home-page",data(){return{email:"",password:"",isLoading:!1,isShowToast:!1,timerId:0}},components:{BaseInput:z,BaseToast:Q},computed:{...(0,y.Se)({isLogin:D.GET_IS_USER_LOGIN,userInfo:D.GET_USER_INFO}),textInputOptions(){return{id:"input1",label:"Email",type:"text",placeholder:"Please enter your email"}},passwordInputOptions(){return{id:"input2",label:"Password",type:"password",placeholder:"Please enter your password"}},isBtnDisabled(){const t=this.email.length>0&&this.password.length>0;return this.isLoading?this.isLoading:!t},toastText(){return"The email address or password is incorrect."}},methods:{updateLoginInput(t){this.email=t},updatePasswordInput(t){this.password=t},async requestLogin(){this.isLoading=!0;const t={login:this.email,password:this.password};try{const e=await C.dispatch("requestLogin",t);e&&this.$router.push("/info")}catch(e){this.email="",this.password="",this.showToast(),console.log("Error",e)}finally{this.isLoading=!1}},showToast(){this.isShowToast=!0,this.timerId=setTimeout((()=>{this.isShowToast=!1,clearTimeout(this.timerId)}),5e3)},closeToast(){this.isShowToast=!1,clearTimeout(this.timerId)}},beforeMount(){const t=sessionStorage.getItem("isLogin");"true"===t&&Object.keys(this.userInfo).length>0&&(C.dispatch("logIn"),this.$router.push("/info"))}});const tt=(0,d.Z)(X,[["render",L],["__scopeId","data-v-b4c4b57a"]]);var et=tt;const st=t=>((0,n.dD)("data-v-40d2542b"),t=t(),(0,n.Cn)(),t),ot={class:"info page"},nt=st((()=>(0,n._)("h2",{class:"title"},"User info",-1))),at={class:"wrapper"};function rt(t,e,s,o,a,r){const i=(0,n.up)("user-card");return(0,n.wg)(),(0,n.iD)("div",ot,[nt,(0,n._)("div",at,[(0,n.Wm)(i,{class:"info__card",data:t.userInfo},null,8,["data"]),(0,n._)("button",{class:"btn",onClick:e[0]||(e[0]=(...e)=>t.exit&&t.exit(...e))},"Logout")])])}const it={class:"user-card card"},ut={class:"user-card__title"},ct={class:"user-card__text"};function pt(t,e,s,o,a,r){return(0,n.wg)(),(0,n.iD)("div",it,[(0,n._)("span",ut,(0,V.zw)(t.data.name)+" "+(0,V.zw)(t.data.secondName),1),(0,n._)("span",ct,(0,V.zw)(t.data.profession),1)])}var lt=(0,n.aZ)({name:"user-card",props:{data:{type:Object,required:!0}}});const dt=(0,d.Z)(lt,[["render",pt],["__scopeId","data-v-43b0bed8"]]);var _t=dt,ht=(0,n.aZ)({name:"info-page",components:{userCard:_t},computed:{...(0,y.Se)({userInfo:D.GET_USER_INFO,isLogin:D.GET_IS_USER_LOGIN})},methods:{exit(){C.dispatch("logOut"),this.$router.push("/")}},beforeMount(){const t=sessionStorage.getItem("isLogin");"true"===t&&Object.keys(this.userInfo).length>0?C.dispatch("logIn"):this.$router.push("/")}});const ft=(0,d.Z)(ht,[["render",rt],["__scopeId","data-v-40d2542b"]]);var mt=ft;const It=[{path:"/",name:"home",component:et},{path:"/info",name:"info",component:mt}],gt=(0,g.p7)({history:(0,g.PO)("/REPO_NAME/"),routes:It});var vt=gt,bt=s(196);const St={install(t){const e=bt.ZP.create({baseURL:"https://e4514330-641e-4461-9363-abecdca5acdd.mock.pstmn.io"});R({...e}),t.config.globalProperties.$api=q}};var wt=St;const Et=(0,o.ri)(I);Et.use(C),Et.use(vt),Et.use(wt),Et.mount("#app")}},e={};function s(o){var n=e[o];if(void 0!==n)return n.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,o,n,a){if(!o){var r=1/0;for(p=0;p<t.length;p++){o=t[p][0],n=t[p][1],a=t[p][2];for(var i=!0,u=0;u<o.length;u++)(!1&a||r>=a)&&Object.keys(s.O).every((function(t){return s.O[t](o[u])}))?o.splice(u--,1):(i=!1,a<r&&(r=a));if(i){t.splice(p--,1);var c=n();void 0!==c&&(e=c)}}return e}a=a||0;for(var p=t.length;p>0&&t[p-1][2]>a;p--)t[p]=t[p-1];t[p]=[o,n,a]}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,a,r=o[0],i=o[1],u=o[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(u)var p=u(s)}for(e&&e(o);c<r.length;c++)a=r[c],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(p)},o=self["webpackChunktest"]=self["webpackChunktest"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(4426)}));o=s.O(o)})();
//# sourceMappingURL=app.cf413338.js.map